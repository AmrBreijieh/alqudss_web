"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[233],{4247:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(4848),o=r(6540),l=r(2064),i=r(2424),s=r(2667),a=r(6247),c=r(1917),d=r(3949),u=r(7543),x=r(1613),h=r(3399);let g=e=>{let t;let r=/\[\[([a-zA-Z0-9]+)\]\]/g,o=[],l=0;for(;null!==(t=r.exec(e));){t.index>l&&o.push(e.substring(l,t.index));let i=t[1];o.push((0,n.jsx)("i",{className:"signal ".concat(i)},t.index)),l=r.lastIndex}return l<e.length&&o.push(e.substring(l)),o};var f=r(7052);let m=e=>{let{question:t,options:r,correctAnswer:m,userAnswer:b,showAnswer:p,onSelect:A,onBookmarkToggle:j,questionNumber:y,qType:w,type:v,quizNumber:C,questionIndex:k}=e,[S,E]=(0,o.useState)(!1),[N,z]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{try{(await (0,f.JS)(w,v,C)).includes(k)&&E(!0)}catch(e){console.error("Error loading bookmarks:",e)}})()},[w,v,C,k]);let R=async()=>{try{z(!0),S?(await (0,f.u6)(w,v,C,k),E(!1),j&&j(C,k,!1)):(await (0,f.p2)(w,v,C,k),E(!0),j&&j(C,k,!0))}catch(e){console.error("Bookmark toggle error:",e)}},I=e=>{switch(e){case"1":return"a";case"2":return"b";case"3":return"c";case"4":return"d";default:return""}};return(0,n.jsxs)(l.A,{sx:{position:"relative",border:"1px solid #ddd",borderRadius:2,p:2,mb:1,bgcolor:"#fdfdfd",boxShadow:1},children:[(0,n.jsx)(i.A,{onClick:R,sx:{position:"absolute",top:0,left:0},"aria-label":"Bookmark this question",children:S?(0,n.jsx)(x.A,{color:"primary"}):(0,n.jsx)(h.A,{})}),(0,n.jsx)(s.A,{open:N,autoHideDuration:2e3,onClose:(e,t)=>{"clickaway"!==t&&z(!1)},message:S?"تم حفظ السؤال بنجاح":"تم إلغاء حفظ السؤال",anchorOrigin:{vertical:"bottom",horizontal:"center"}}),(0,n.jsxs)(a.A,{variant:"h6",gutterBottom:!0,fontSize:"16px",fontWeight:800,mb:4,pl:"10px",children:[y,"- ",g(t)]}),(0,n.jsx)(l.A,{children:["1","2","3","4"].filter(e=>void 0!==r[I(e)]).map(e=>{let t=r[I(e)]||"",o="grey.100",l="text.primary";p?e===m?(o="#81c784",l="#051406"):e===b&&e!==m?(o="#e57373",l="#2e0606"):l="#757575":e===b&&(o="warning.light",l="white");let i=b===e,s=e===m,x=i&&!s;return(0,n.jsxs)(c.A,{fullWidth:!0,onClick:()=>A&&A(e),disabled:p,sx:{mt:1.1,textAlign:"left",bgcolor:o,color:l,display:"flex",alignItems:"center",justifyContent:"space-between",padding:1.7,borderRadius:1,boxShadow:i?3:1,transition:"all 0.3s ease","&:hover":{bgcolor:p?o:i?"warning.main":"#e0e0e0",color:i?"white":p?l:"text.primary",boxShadow:p?i?3:1:4},"&:disabled":{bgcolor:o,color:l,boxShadow:"none"}},"aria-label":p?s?"الخيار ".concat(e,": الإجابة الصحيحة"):x?"الخيار ".concat(e,": إجابتك الخاطئة"):"الخيار ".concat(e):"اختر الخيار ".concat(e,": ").concat(t),children:[(0,n.jsx)(a.A,{variant:"body1",fontWeight:600,fontSize:"15px",textAlign:"right",sx:{flexGrow:1},children:g(t)}),p&&(s?(0,n.jsx)(d.A,{color:"success"}):x?(0,n.jsx)(u.A,{}):null)]},e)})})]},y)}},3233:(e,t,r)=>{r.d(t,{A:()=>N});var n=r(4848),o=r(6540),l=r(6715),i=r(2064),s=r(1917),a=r(1657),c=r(8489),d=r(6247),u=r(9783),x=r(2832),h=r(309),g=r(8566);let f=e=>{let{answeredQuestions:t,total:r,timeLeft:o,questionTitleRef:l,autoNext:s,setAutoNext:a}=e,c=Math.floor(o/60),f=o%60,m=t/r*100;return(0,n.jsxs)(i.A,{sx:{width:"100%"},ref:l,children:[(0,n.jsx)(i.A,{sx:{display:"flex",alignItems:"center",mb:1},children:(0,n.jsxs)(d.A,{variant:"body1",sx:{flexGrow:1},children:["مستوى التقدم: ",Math.round(m),"%"]})}),(0,n.jsx)(u.A,{variant:"determinate",value:m,sx:{height:10,borderRadius:5,mb:1}}),(0,n.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,n.jsx)(g.A,{sx:{mr:1,color:"text.secondary"}}),(0,n.jsxs)(d.A,{variant:"body1",ml:3,children:["الوقت المتبقي: ",c<10?"0".concat(c):c,":",f<10?"0".concat(f):f]}),(0,n.jsx)(x.A,{control:(0,n.jsx)(h.A,{checked:s,onChange:e=>a(e.target.checked),color:"primary"}),label:"التنقل التلقائي",labelPlacement:"start"})]})]})};var m=r(2561);let b=e=>{let{open:t,onContinue:r,onFinish:o}=e;return(0,n.jsx)(m.A,{open:t,onClose:r,children:(0,n.jsxs)(i.A,{sx:{p:4,bgcolor:"white",borderRadius:2,textAlign:"center",mx:"auto",mt:"20%",width:{xs:300,sm:400},boxShadow:24,fontFamily:"cairo"},children:[(0,n.jsx)(d.A,{variant:"h5",gutterBottom:!0,children:"انتهى الوقت!"}),(0,n.jsx)(d.A,{variant:"body1",gutterBottom:!0,children:"هل ترغب في مراجعة إجاباتك أو رؤية نتيجتك؟"}),(0,n.jsxs)(i.A,{sx:{mt:2},children:[(0,n.jsx)(s.A,{variant:"contained",color:"primary",sx:{m:1},onClick:r,children:"المتابعة"}),(0,n.jsx)(s.A,{variant:"contained",color:"success",sx:{m:1},onClick:o,children:"عرض النتيجة"})]})]})})};var p=r(8195),A=r(4133);let j=e=>{let{open:t,score:r,total:o,onRestart:l,onClose:a}=e,c=o-r<=5,u=c?(0,n.jsx)(p.A,{color:"success",sx:{fontSize:60}}):(0,n.jsx)(A.A,{color:"error",sx:{fontSize:60}});return(0,n.jsx)(m.A,{open:t,onClose:a,"aria-labelledby":"score-modal-title",children:(0,n.jsxs)(i.A,{sx:{outline:"none",border:"none",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:320,sm:400},bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2,textAlign:"center",fontFamily:"cairo"},children:[u,(0,n.jsx)(d.A,{id:"score-modal-title",variant:"h4",gutterBottom:!0,children:c?"لقد نجحت":"لقد رسبت"}),(0,n.jsxs)(d.A,{variant:"h5",gutterBottom:!0,children:[r," / ",o]}),(0,n.jsx)(d.A,{variant:"body1",color:c?"success.main":"error.main",gutterBottom:!0,children:c?"أحسنت! لقد قمت بعمل رائع. استمر في التقدم فأنت على الطريق الصحيح.":"لا تقلق! يمكنك المحاولة مرة أخرى والتحسن. النجاح يأتي بالمثابرة والتعلم من الأخطاء."}),(0,n.jsxs)(i.A,{sx:{display:"flex",justifyContent:"center",gap:1,mt:2},children:[(0,n.jsx)(s.A,{variant:"outlined",color:"secondary",sx:{fontWeight:"700"},onClick:a,children:"اغلاق"}),(0,n.jsx)(s.A,{variant:"contained",color:"primary",sx:{fontWeight:"700",color:"white"},onClick:l,children:"إعادة الاختبار"})]})]})})};var y=r(4247),w=r(2058),v=r(7052),C=r(9404);function k(e){var t;let{qType:r,type:o,currentQuizNumber:a}=e,c=(0,l.useRouter)();if("random"===a)return null;let d=null===(t=C[r])||void 0===t?void 0:t[o];if(!d)return null;let u=Object.keys(d);return(0,n.jsx)(i.A,{sx:{display:"flex",justifyContent:"center"},children:(0,n.jsx)(i.A,{sx:{overflowX:"auto",whiteSpace:"nowrap",display:"flex",gap:0,px:0,py:1,mb:2},children:u.map(e=>(0,n.jsx)(s.A,{variant:e===a?"contained":"outlined",onClick:()=>c.push("/teoria/".concat(r,"/").concat(o,"/").concat(e)),sx:{minWidth:"50px",fontWeight:"bold",flexShrink:0,borderRadius:0},children:e},e))})})}let S=o.memo(y.A),E=o.memo(e=>{let{totalQuestions:t,currentIndex:r,userAnswers:o,onNavigate:l,visited:a,showAnswers:c}=e,u=e=>{if(e===r)return"#87CEEB";if(c[e]){var t;return(null===(t=o[e])||void 0===t?void 0:t.isCorrect)?"success.main":"error.main"}return null!==o[e]?"warning.light":a.includes(e)?"grey.800":"grey.500"},x=()=>"white";return(0,n.jsxs)(i.A,{children:[(0,n.jsx)(w.Ay,{container:!0,spacing:1,flex:1,justifyContent:"center",children:Array.from({length:t},(e,r)=>{let o=u(r),i=x();return(0,n.jsx)(w.Ay,{item:!0,sx:{display:"flex",justifyContent:r>=t-(t%3||3)?"flex-end":"center"},children:(0,n.jsx)(s.A,{variant:"contained",onClick:()=>l(r),sx:{bgcolor:o,color:i,width:40,height:40,minWidth:40,fontSize:"0.875rem",borderRadius:1,"&:hover":{bgcolor:o,opacity:.9},transition:"opacity 0.3s"},"aria-label":"Navigate to question ".concat(r+1),children:r+1})},r)})}),(0,n.jsx)(i.A,{sx:{mt:3},children:(0,n.jsx)(w.Ay,{container:!0,spacing:2,children:[{color:"#87CEEB",label:"السؤال الحالي"},{color:"#4caf50",label:"اجابة صحيحة"},{color:"#f44336",label:"اجابة خاطئة"},{color:"#ff9800",label:"تمت الاجابة"},{color:"#424242",label:"تمت رؤيته"},{color:"#9e9e9e",label:"لم يتم رؤيته"}].map((e,t)=>(0,n.jsx)(w.Ay,{item:!0,xs:4,sm:4,md:4,children:(0,n.jsxs)(i.A,{display:"flex",alignItems:"center",children:[(0,n.jsx)(i.A,{sx:{width:16,height:16,bgcolor:e.color,borderRadius:"50%",mr:.1}}),(0,n.jsx)(d.A,{variant:"body2",fontSize:"10px",fontWeight:600,paddingRight:.2,children:e.label})]})},t))})})]})});function N(e){let{qType:t,type:r,quizNumber:d,quiz:u}=e;(0,l.useRouter)();let x=(0,o.useRef)(null),[h,g]=(0,o.useState)(!1),[m,p]=(0,o.useState)(0),[A,y]=(0,o.useState)([]),[w,C]=(0,o.useState)([]),[N,z]=(0,o.useState)(2400),[R,I]=(0,o.useState)(!1),[W,q]=(0,o.useState)(!1),[B,T]=(0,o.useState)([]),[_,Q]=(0,o.useState)(new Set);(0,o.useEffect)(()=>{u&&(y(Array(u.length).fill(null)),C([0]),z(2400),I(!1),q(!1),T(Array(u.length).fill(!1)),Q(new Set),p(0))},[u]),(0,o.useEffect)(()=>{C(e=>e.includes(m)?e:[...e,m])},[m]),(0,o.useEffect)(()=>{if(!u)return;let e=setInterval(()=>{z(t=>t<=0?(clearInterval(e),q(!0),0):t-1)},1e3);return()=>clearInterval(e)},[u]);let F=(0,o.useCallback)(()=>{if(x.current){let e=x.current.offsetTop-100;window.scrollTo({top:e,behavior:"smooth"})}},[100]),D=(0,o.useCallback)(async()=>{let e=u.map((e,t)=>{let r=A[t];return{answer:(null==r?void 0:r.answer)||null,isCorrect:(null==r?void 0:r.answer)===e.answer}});y(e);let n=[];for(let[o,l]of e.entries()){let e=u[o],i="random"===d?e._originalQuizNumber:d,s="random"===d?e._originalQuestionIndex:o,a="".concat(i,"-").concat(s);if(!l.isCorrect&&!_.has(a))try{await (0,v.Tk)(t,r,i,s),n.push(a)}catch(e){console.error("Error recording wrong answer:",e)}}Q(e=>new Set([...e,...n]));let o=e.filter(e=>e.isCorrect).length;"random"!==d&&await (0,v.ql)(t,r,d,o,u.length),T(Array(u.length).fill(!0)),I(!0)},[u,A,_,d,r,t]),G=(0,o.useCallback)(()=>{m<u.length-1?(p(e=>e+1),F()):setTimeout(()=>{D()},0)},[m,u,F,D]),M=(0,o.useCallback)(()=>{m>0&&(p(e=>e-1),F())},[m,F]),O=(0,o.useCallback)(e=>{y(t=>{let r=[...t],n=e===u[m].answer;return r[m]={answer:e,isCorrect:n},r}),h&&m<u.length-1&&setTimeout(G,250)},[h,m,u,G]),P=(0,o.useCallback)(async()=>{T(e=>{let t=[...e];return t[m]=!0,t});let e=A[m];if(!e)return;let n=d,o=m;if("random"===d){let e=u[m];n=e._originalQuizNumber,o=e._originalQuestionIndex}let l="".concat(n,"-").concat(o);if(!e.isCorrect&&!_.has(l))try{await (0,v.Tk)(t,r,n,o),Q(e=>new Set([...e,l]))}catch(e){console.error("Error recording wrong answer:",e)}h&&m<u.length-1&&setTimeout(G,250)},[m,A,_,d,u,t,r,h,G]),H=(0,o.useCallback)(()=>{y(Array(u.length).fill(null)),C([0]),z(2400),I(!1),q(!1),T(Array(u.length).fill(!1)),Q(new Set),p(0)},[u]),J=!isNaN(d);return u&&0!==u.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.A,{title:"أسئلة تؤوريا ".concat({private:"خصوصي",light:"شحن خفيف",heavy:"شحن ثقيل",taxi:"عمومي",motorcycle:"دراجة نارية",tractor:"تراكتور",quizes:"تدريب سياقة"}[r]," (").concat(J?d:"إختبار",")")}),(0,n.jsx)(k,{qType:t,type:r,currentQuizNumber:d}),(0,n.jsxs)(i.A,{sx:{maxWidth:1e3,mx:"auto",mt:4,p:2},children:[(0,n.jsx)(f,{questionTitleRef:x,answeredQuestions:A.filter(Boolean).length,total:u.length,timeLeft:N,autoNext:h,setAutoNext:g}),(0,n.jsxs)(i.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,mt:2},children:[(0,n.jsxs)(i.A,{sx:{flex:2},children:[(0,n.jsx)(a.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:500,damping:30},children:(()=>{var e;let o=u[m],l="random"===d?o._originalQuizNumber:d,i="random"===d?o._originalQuestionIndex:m;return(0,n.jsx)(S,{question:o.question,options:{a:o.a,b:o.b,c:o.c,d:o.d},correctAnswer:o.answer,userAnswer:null===(e=A[m])||void 0===e?void 0:e.answer,showAnswer:B[m],questionNumber:m+1,type:r,qType:t,quizNumber:l,questionIndex:i,onSelect:O})})()},m),(0,n.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",gap:1,mt:2},children:[(0,n.jsx)(s.A,{variant:"contained",onClick:M,disabled:0===m,sx:{fontWeight:800,color:"white",bgcolor:"#737373","&:hover":{backgroundColor:"#5c5c5c"}},children:"السابق"}),(0,n.jsx)(s.A,{variant:"contained",color:"secondary",sx:{fontWeight:"700",bgcolor:"#87CEEB",color:"white","&:hover":{bgcolor:"#5ebbe0"}},onClick:P,disabled:B[m],children:"التحقق من الإجابة"}),(0,n.jsx)(s.A,{variant:"contained",color:m===u.length-1?"success":"primary",sx:{fontWeight:800,color:"white",p:"10px 20px","&:hover":{backgroundColor:"#a37729"}},onClick:G,children:m<u.length-1?"التالي":"إنهاء"})]})]}),(0,n.jsx)(i.A,{sx:{flex:1},children:(0,n.jsx)(E,{totalQuestions:u.length,currentIndex:m,userAnswers:A,visited:w,showAnswers:B,onNavigate:e=>{p(e),F()}})})]}),(0,n.jsx)(b,{open:W,onContinue:()=>q(!1),onFinish:D}),(0,n.jsx)(j,{open:R,score:A.filter(e=>null==e?void 0:e.isCorrect).length,total:u.length,onRestart:H,onClose:()=>I(!1)})]})]}):(0,n.jsx)(i.A,{sx:{p:4},children:(0,n.jsx)("h2",{children:"لا يوجد أسئلة لهذا الامتحان"})})}}}]);